[General]

# > è·³è¿‡ä»£ç†
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local

# > æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true

# > Internet æµ‹è¯• URL
internet-test-url = http://taobao.com/

# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://www.apple.com/

# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 5

# > DNS æœåŠ¡å™¨
dns-server = 223.5.5.5, 114.114.114.114, system

# > åŠ å¯†çš„DNSæœåŠ¡å™¨(å¦‚æ— å¿…è¦ä¸å»ºè®®ä½¿ç”¨)
# encrypted-dns-server = https://223.5.5.5/dns-query // é™¤éå½“åœ° ISP æœ‰ä¸¥é‡çš„ DNS æ±¡æŸ“é—®é¢˜ï¼Œå¦åˆ™æ²¡å¿…è¦å¼€å¯ DoHï¼Œä¼ ç»Ÿ DNS çš„æ€§èƒ½æœ€ä¼˜ï¼Œç½‘ç»œå¼‚å¸¸åæ¢å¤é€Ÿåº¦æœ€å¿«

# > UDP IP é˜²æ³„æ¼
# å¦‚æœæ²¡æœ‰ä»£ç†æœåŠ¡å™¨æ”¯æŒ UDP è½¬å‘ï¼Œå¯ä¿®æ”¹ä¸ºã€Œ direct ã€æˆ–æ³¨é‡Šä¸‹æ¡ï¼Œä½†éœ€æ³¨æ„åŒä¸€ç›®æ ‡ä¸»æœºå TCP è¯·æ±‚ä¸ UDP è¯·æ±‚çš„æºåœ°å€ä¸åŒæ‰€é€ æˆçš„éšç§åŠå®‰å…¨é£é™©ã€‚
udp-policy-not-supported-behaviour = reject

# > å¢å¼ºç‰ˆ Wi-Fi åŠ©ç†
wifi-assist = true

# > è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
geoip-maxmind-url = https://cdn.jsdelivr.net/gh/NobyDa/geoip@release/Private-GeoIP-CN.mmdb

# > IPv6 æ”¯æŒï¼ˆé»˜è®¤å…³é—­ï¼‰
ipv6 = false // å¦‚æ— ç‰¹æ®Šéœ€æ±‚ä¸åº”å¼€å¯ IPv6ï¼Œç›®å‰ç½‘ç»œç¯å¢ƒä¸‹ IPv6 åªä¼šå¸¦æ¥é—®é¢˜ã€‚

# > Hijack DNS
# hijack-dns = 8.8.8.8:53, 8.8.4.4:53

# > Always Real IP Hosts
always-real-ip = *.msftconnecttest.com, *.msftncsi.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, *.logon.battlenet.com.cn, *.logon.battle.net, stun.l.google.com

[Proxy Group]
Proxy = select, HK, TW, JP, SG, US

HK = url-test, policy-path=è®¢é˜…é“¾æ¥, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(æ¸¯)|(Hong)|(HK), hidden=false

TW = url-test, policy-path=è®¢é˜…é“¾æ¥, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW), hidden=false

JP = url-test, policy-path=è®¢é˜…é“¾æ¥, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP), hidden=false

SG = url-test, policy-path=è®¢é˜…é“¾æ¥, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°)|(Singapore)|(SG), hidden=false

US = url-test, policy-path=è®¢é˜…é“¾æ¥, interval=600, tolerance=50, update-interval=86400, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US), hidden=false

[Rule]
# å±è”½ HTTP3/QUIC åè®®
# é˜»æ­¢æ‰€æœ‰ UDP æµé‡è¿›å…¥443ç«¯å£ï¼Œä½¿ HTTP3 è¯·æ±‚å›è½åˆ° TCP æµé‡ã€‚
AND,((PROTOCOL,UDP),(DEST-PORT,443)),REJECT-NO-DROP

# å±è”½ YouTube çš„ UDP
AND,((PROTOCOL,UDP),(DOMAIN-SUFFIX,googlevideo.com)),REJECT-NO-DROP

# é‚®ä»¶æœåŠ¡é»˜è®¤ç«¯å£
OR,((DEST-PORT,25), (DEST-PORT,110), (DEST-PORT,143)),DIRECT

# NTPæœåŠ¡é»˜è®¤ç«¯å£
AND,((OR,((DOMAIN,time-ios.apple.com), (DOMAIN,time.apple.com), (DOMAIN-SUFFIX,pool.ntp.org))), (DEST-PORT,123)),DIRECT

# Apple
DOMAIN,apps.apple.com,Proxy
DOMAIN-SUFFIX,store.apple.com,DIRECT
DOMAIN,xp.apple.com,Proxy // iOS & macOS System Upgrade
RULE-SET,SYSTEM,DIRECT
# Rulesets
RULE-SET,apple.list,Proxy
RULE-SET,netflix.list,Proxy
RULE-SET,disney.list
RULE-SET,blocked.list,Proxy
RULE-SET,telegram.list,Proxy
RULE-SET,cn.list,DIRECT
IP-CIDR,0.0.0.0/32,REJECT,no-resolve
# ä»¥ä¸‹è§„åˆ™å°†è§¦å‘æœ¬åœ° DNS è§£æ
RULE-SET,LAN,DIRECT
RULE-SET,ASN.list
# GeoIP CN
GEOIP,CN,DIRECT
FINAL,Proxy,dns-failed
